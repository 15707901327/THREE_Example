<!DOCTYPE html>

<html>

<head>
    <title>Example 10.07 - UV mapping </title>
    <script src="../three.js-master/build/three.min.js"></script>
    <!--<script type="text/javascript" src="../libs/OBJLoader.js"></script>-->


    <!--<script type="text/javascript" src="../libs/stats.js"></script>-->
    <!--<script type="text/javascript" src="../libs/dat.gui.js"></script>-->
    <style>
        body {
            /* set margin to 0 and overflow to hidden, to go fullscreen */
            margin: 0;
            overflow: hidden;
        }
    </style>
</head>
<body>
<!-- Div which will hold the Output -->
<div id="WebGL-output">
</div>

<!-- Javascript code that runs our Three.js examples -->
<script type="text/javascript">

    // once everything is loaded, we run our Three.js stuff.
    function init() {

        // create a scene, that will hold all our elements such as objects, cameras and lights.
        var scene = new THREE.Scene();

        // create a camera, which defines where we're looking at.
        var camera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 1, 10000);

        // create a render and set the size
        var webGLRenderer = new THREE.WebGLRenderer({
            antialias:true,//antialias:true/false是否开启反锯齿
            precision:"lowp",//precision:highp/mediump/lowp着色精度选择
            preserveDrawingBuffer:true,//preserveDrawingBuffer:true/false是否保存绘图缓冲
            maxLights:1//maxLights:最大灯光数
        });
        webGLRenderer.setClearColor(new THREE.Color(0xffffff, 1.0));
        webGLRenderer.setSize(window.innerWidth, window.innerHeight);

        // position and point the camera to the center of the scene
        camera.position.x = 41.7842;
        camera.position.y = 1817.75;
        camera.position.z = 1200;


//        camera.position.x = 41.7842;
//        camera.position.y = 1200;
//        camera.position.z = 1817.75;

        //-177.773,-170.16,1200
        camera.lookAt(new THREE.Vector3(-177.773,1200,-170.16));


        // add the output of the renderer to the html element
        document.getElementById("WebGL-output").appendChild(webGLRenderer.domElement);

        // call the render function
        var step = 0;

        var loader = new THREE.TextureLoader();
        var clothTexture = loader.load( 'img/textures/2088-22532-11.jpg' );
        clothTexture.wrapS = clothTexture.wrapT = THREE.RepeatWrapping;
        var clothMaterial = new THREE.MeshBasicMaterial( {
            map: clothTexture,
            alphaTest: 0,
            side : THREE.DoubleSide,
            color: 0xFFFFFF
        } );
        var geometry = new THREE.Geometry();
        var vertices = [];
        vertices.push(new THREE.Vector3(1820,0,-2340));
        vertices.push(new THREE.Vector3(1820,0,2660));
        vertices.push(new THREE.Vector3(-2180,0,2660));
        vertices.push(new THREE.Vector3(-2180,0,-2340));
        geometry.vertices = vertices;

        var faces = [];
        faces.push(new THREE.Face3(1,2,3));
        faces.push(new THREE.Face3(0,1,3));
        geometry.faces = faces;

        var list = [
            new THREE.Vector2(0,-1),
            new THREE.Vector2(1,-1),
            new THREE.Vector2(1,0),
        ];

        var list2 = [
            new THREE.Vector2(0,0),
            new THREE.Vector2(0,-1),
            new THREE.Vector2(1,0),
        ];

        geometry.faceVertexUvs[0][0] = list;
        geometry.faceVertexUvs[0][1] = list2;

        geometry.computeBoundingSphere();


        var mesh = new THREE.Mesh(geometry, clothMaterial);
        //-2090,-1434.57,362.75
        mesh.position.set(-2090,362.75,-1434.57);
        scene.add(mesh);


        /************ 顶面2 ************/
         geometry = new THREE.BoxGeometry();

        var clothTexture = loader.load( 'img/textures/2088-22532-11.jpg' );
        var clothMaterial = new THREE.MeshBasicMaterial( {
            map:clothTexture,
            alphaTest: 0.5,
            side : THREE.DoubleSide
        } );

        var vertices = [];
        vertices.push(new THREE.Vector3(2000,0,0));
        vertices.push(new THREE.Vector3(2000,1400,0));
        vertices.push(new THREE.Vector3(2000,2800,0));
        vertices.push(new THREE.Vector3(1000,2800,0));
        vertices.push(new THREE.Vector3(0,2800,0));
        vertices.push(new THREE.Vector3(-1000,2800,0));
        vertices.push(new THREE.Vector3(-2000,2800,0));
        vertices.push(new THREE.Vector3(-2000,1400,0));
        vertices.push(new THREE.Vector3(-2000,0,0));
        vertices.push(new THREE.Vector3(-1000,0,0));
        vertices.push(new THREE.Vector3(0,0,0));
        vertices.push(new THREE.Vector3(1000,0,0));
        vertices.push(new THREE.Vector3(960,800,0));
        vertices.push(new THREE.Vector3(960,1300,0));
        vertices.push(new THREE.Vector3(960,1800,0));
        vertices.push(new THREE.Vector3(960,2300,0));
        vertices.push(new THREE.Vector3(560,2300,0));
        vertices.push(new THREE.Vector3(160,2300,0));
        vertices.push(new THREE.Vector3(-240,2300,0));
        vertices.push(new THREE.Vector3(-640,2300,0));
        vertices.push(new THREE.Vector3(-640,1800,0));
        vertices.push(new THREE.Vector3(-640,1300,0));
        vertices.push(new THREE.Vector3(-640,800,0));
        vertices.push(new THREE.Vector3(-240,800,0));
        vertices.push(new THREE.Vector3(160,800,0));
        vertices.push(new THREE.Vector3(560,800,0));
        geometry.vertices = vertices;


        var faces = [];
       faces.push(new THREE.Face3(5,6,7));
       faces.push(new THREE.Face3(11,12,25));
       faces.push(new THREE.Face3(24,10,25));
       faces.push(new THREE.Face3(18,4,19));
       faces.push(new THREE.Face3(10,11,25));

       faces.push(new THREE.Face3(23,10,24));
       faces.push(new THREE.Face3(7,8,9));
       faces.push(new THREE.Face3(2,3,15));
       faces.push(new THREE.Face3(11,0,12));
       faces.push(new THREE.Face3(0,1,12));

       faces.push(new THREE.Face3(21,7,22));
       faces.push(new THREE.Face3(20,7,21));
       faces.push(new THREE.Face3(9,10,22));
       faces.push(new THREE.Face3(7,9,22));
       faces.push(new THREE.Face3(14,1,15));

       faces.push(new THREE.Face3(1,2,15));
       faces.push(new THREE.Face3(13,1,14));
       faces.push(new THREE.Face3(12,1,13));
       faces.push(new THREE.Face3(15,3,16));
       faces.push(new THREE.Face3(3,4,16));

       faces.push(new THREE.Face3(16,4,17));
       faces.push(new THREE.Face3(22,10,23));
       faces.push(new THREE.Face3(17,4,18));
       faces.push(new THREE.Face3(4,5,19));
       faces.push(new THREE.Face3(5,7,19));

       faces.push(new THREE.Face3(19,7,20));
        geometry.faces = faces;

        var list = [
            new THREE.Vector2(0.75,0),
            new THREE.Vector2(1,0.5),
            new THREE.Vector2(1,0),
        ];
        var list2 = [
            new THREE.Vector2(0.25,1),
            new THREE.Vector2(0.26,0.714286),
            new THREE.Vector2(0.36,0.714286),
        ];
        var list3 = [
            new THREE.Vector2(0.46,0.714286),
            new THREE.Vector2(0.5,1),
            new THREE.Vector2(0.36,0.714286),
        ];
        var list4 = [
            new THREE.Vector2(0.56,0.178571),
            new THREE.Vector2(0.5,0),
            new THREE.Vector2(0.66,0.178571),
        ];
        var list5 = [
            new THREE.Vector2(0.5,1),
            new THREE.Vector2(0.25,1),
            new THREE.Vector2(0.36,0.714286),
        ];
        var list6 = [
            new THREE.Vector2(0.56,0.714286),
            new THREE.Vector2(0.5,1),
            new THREE.Vector2(0.46,0.714286),
        ];
        geometry.faceVertexUvs[0][0] = list;
        geometry.faceVertexUvs[0][1] = list2;
        geometry.faceVertexUvs[0][2] = list3;
        geometry.faceVertexUvs[0][3] = list4;
        geometry.faceVertexUvs[0][4] = list5;
        geometry.faceVertexUvs[0][5] = list6;
        list6 = [
            new THREE.Vector2(1,0.5),
            new THREE.Vector2(1,1),
            new THREE.Vector2(0.75,1),
        ];
        geometry.faceVertexUvs[0][6] = list6;
        list6 = [
            new THREE.Vector2(0,0),
            new THREE.Vector2(0.25,0),
            new THREE.Vector2(0.26,0.178571),
        ];
        geometry.faceVertexUvs[0][7] = list6;
        list6 = [
            new THREE.Vector2(0.25,1),
            new THREE.Vector2(0,1),
            new THREE.Vector2(0.26,0.714286),
        ];
        geometry.faceVertexUvs[0][8] = list6
        list6 = [
            new THREE.Vector2(0,1),
            new THREE.Vector2(0,0.5),
            new THREE.Vector2(0.26,0.714286),
        ];
        geometry.faceVertexUvs[0][9] = list6;
        list6 = [
            new THREE.Vector2(0.66,0.535714),
            new THREE.Vector2(1,0.5),
            new THREE.Vector2(0.66,0.714286),
        ];
        geometry.faceVertexUvs[0][10] = list6;
        list6 = [
            new THREE.Vector2(0.66,0.357143),
            new THREE.Vector2(1,0.5),
            new THREE.Vector2(0.66,0.535714),
        ];
        geometry.faceVertexUvs[0][11] = list6;
        list6 = [
            new THREE.Vector2(0.75,1),
            new THREE.Vector2(0.5,1),
            new THREE.Vector2(0.66,0.714286),
        ];
        geometry.faceVertexUvs[0][12] = list6;
        list6 = [
            new THREE.Vector2(1,0.5),
            new THREE.Vector2(0.75,1),
            new THREE.Vector2(0.66,0.714286),
        ];
        geometry.faceVertexUvs[0][13] = list6;
        list6 = [
            new THREE.Vector2(0.26,0.357143),
            new THREE.Vector2(0,0.5),
            new THREE.Vector2(0.26,0.178571),
        ];
        geometry.faceVertexUvs[0][14] = list6;
        list6 = [
            new THREE.Vector2(0,0.5),
            new THREE.Vector2(0,0),
            new THREE.Vector2(0.26,0.178571),
        ];
        geometry.faceVertexUvs[0][15] = list6;
        list6 = [
            new THREE.Vector2(0.26,0.535714),
            new THREE.Vector2(0,0.5),
            new THREE.Vector2(0.26,0.357143),
        ];
        geometry.faceVertexUvs[0][16] = list6;
        list6 = [
            new THREE.Vector2(0.26,0.714286),
            new THREE.Vector2(0,0.5),
            new THREE.Vector2(0.26,0.535714),
        ];
        geometry.faceVertexUvs[0][17] = list6;
        list6 = [
            new THREE.Vector2(0.26,0.178571),
            new THREE.Vector2(0.25,0),
            new THREE.Vector2(0.36,0.178571),
        ];
        geometry.faceVertexUvs[0][18] = list6;
        list6 = [
            new THREE.Vector2(0.25,0),
            new THREE.Vector2(0.5,0),
            new THREE.Vector2(0.36,0.178571),
        ];
        geometry.faceVertexUvs[0][19] = list6;
        list6 = [
            new THREE.Vector2(0.36,0.178571),
            new THREE.Vector2(0.5,0),
            new THREE.Vector2(0.46,0.178571),
        ];
        geometry.faceVertexUvs[0][20] = list6;
        list6 = [
            new THREE.Vector2(0.66,0.714286),
            new THREE.Vector2(0.5,1),
            new THREE.Vector2(0.56,0.714286),
        ];
        geometry.faceVertexUvs[0][21] = list6;
        list6 = [
            new THREE.Vector2(0.46,0.178571),
            new THREE.Vector2(0.5,0),
            new THREE.Vector2(0.56,0.178571),
        ];
        geometry.faceVertexUvs[0][22] = list6;
        list6 = [
            new THREE.Vector2(0.5,0),
            new THREE.Vector2(0.75,0),
            new THREE.Vector2(0.66,0.178571),
        ];
        geometry.faceVertexUvs[0][23] = list6;
        list6 = [
            new THREE.Vector2(0.75,0),
            new THREE.Vector2(1,0.5),
            new THREE.Vector2(0.66,0.178571),
        ];
        geometry.faceVertexUvs[0][24] = list6;
        list6 = [
            new THREE.Vector2(0.66,0.178571),
            new THREE.Vector2(1,0.5),
            new THREE.Vector2(0.66,0.357143),
        ];
        geometry.faceVertexUvs[0][25] = list6;

        geometry.computeBoundingSphere();

        mesh = new THREE.Mesh(geometry,clothMaterial);
        mesh.position.set(-180,0,-2340);
        scene.add(mesh);


        /*******************************************************************/


        /*******************************************************************/

        render();


        function render() {
            requestAnimationFrame(render);
            webGLRenderer.render(scene, camera);
        }
    }
    window.onload = init;
</script>
</body>
</html>